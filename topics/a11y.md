# Accessibility Notes

## Focus Management

* When programmatically moving focus, ensure that:
  * The element receiving focus has `tabindex="-1"` and has content for screen reader to read
  * Focus isn't moving unexpectedly (ideally, only move it as result of user interaction)
  * JS and the browser have had enough time to render any dynamically loaded content
    * e.g. Call `.focus()` in a `setTimeout`
    * Use 1 second delay to support the buggiest screen readers
* For new SPA page, move focus to heading that titles the page

## Live Regions

* Can be `assertive` or `polite`
  * `assertive` will cause screen reader to interrupt what it's currently reading
  * Use assertive for the result of a user interaction
* Can use `role="alert"` on a container to make it an assertive live region labeled as an alert
* Must exist in DOM and be empty *before* content is added
  * Can't insert one and make announcement all at once
  * Ideally, just add empty one on page load
* Try to keep content short
* Should remove content from live region shortly after it's added
  * Don't want user to run across content that's no longer relevant
* Can be visually hidden if not helpful for visual users
* Can use to let user know a long running operation is in progress
* Can use to announce that an operation succeeded or failed

## Forms

* Better not to use placeholder as input label
  * Not displayed with sufficiently high contrast
  * Intended for non-essential info
  * Some screen readers only read it when input is empty
* Better to associate label to input with for/id instead of nesting
* Can use `aria-label` when no visual label needed
  * e.g. Input with search button next to it
* `aria-labelledby` can refer to multiple elements via space-separated IDs
  * e.g. To associate an input in a table with row and column labels
* For a multi-input field (e.g. phone number) you can use `<label>` for first input and `aria-label` or off screen label for rest
* Use `aria-describedby` to associate an input with additional instructions
  * Instructions must not be inside form without association
* Required fields
  * Set `aria-required="true"`
    * Or `required` if you want browser validation too
  * Also provide visual marker (e.g. asterisks)
* Form errors
  * Fields with errors should have `aria-invalid="true"`
  * If each error message displayed next to field, associate field with `aria-describedby`
  * If all errors displayed at top of form, send focus to them after submit
  * If errors displayed inline, send focus to brief summary above form or to first invalid field
  * If form does page (re)load, put brief message in page `<title>`
  * For screen readers, it's better to wait until the form is submitted to display errors than to try real time validation
* Anti-patterns
  * Automatically moving focus to next input

## Screen Readers

* Have different models for different types of tasks
  * e.g. Reading a document, filling out a form
  * Focus mode = Only navigate through focusable elements
  * 